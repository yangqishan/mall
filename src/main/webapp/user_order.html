<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/css.css" rel="stylesheet" type="text/css" />
<link href="css/common.css" rel="stylesheet" type="text/css" />
<link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<script src="js/jquery.min.1.8.2.js" type="text/javascript"></script>
<script src="js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>
<script type="text/javascript" src="js/slide.js"></script>
<script src="js/common_js.js" type="text/javascript"></script>
<script src="js/jquery.foucs.js" type="text/javascript"></script>
<title>用户中心</title>
</head>
<script type="text/javascript">
  $(document).ready(function(){

		  setInterval(showTime, 1000);                                
		  function timer(obj,txt){
						  obj.text(txt);
		  }        
		  function showTime(){                                
				  var today = new Date();
				  var weekday=new Array(7)
				  weekday[0]="星期日"
				  weekday[1]="星期一"
				  weekday[2]="星期二"
				  weekday[3]="星期三"
				  weekday[4]="星期四"
				  weekday[5]="星期五"
				  weekday[6]="星期六"                                        
				  var y=today.getFullYear()+"年";
				  var month=today.getMonth()+1+"月";
				  var td=today.getDate();
				  var d=weekday[today.getDay()];
				  var h=today.getHours();
				  var m=today.getMinutes();
				  var s=today.getSeconds();        
				  timer($("#y"),y+month);
				  //timer($("#MH"),month);        
				  timer($("h1"),td);        
				  timer($("#D"),d);
				  timer($("#H"),h);
				  timer($("#M"),m);
				  timer($("#S"),s);
		  }        
  })
</script>
<body>
<!--顶部样式-->
<div class="top_header">
<em class="left_img"></em>
<div class="header clearfix" id="header">
<a href="#" class="logo_img"></a>
<div class="header_Section">
    <div id="head"></div>
 <div class="nav" id="Navigation">
  <ul class="Navigation_name"> 
   <li class=""><a href="index.html">首页</a></li>
   <li class=""><a href="Products.html">所有果蔬</a></li>
   <li class=""><a href="Group_buy.html">活动专区</a></li>
      <li class=""><a href="integral.html">积分商城</a></li>
      <li class=""><a href="Product-List.html">特价</a></li>
      <li class=""><a href="Product-List1.html">鲜肉海鲜</a></li>
   <li class=""><a href="user.html">会员中心</a></li>
  </ul>
 </div>
 <script>$("#Navigation").slide({titCell:".Navigation_name li"});</script>
</div>
</div>
<em class="right_img"></em>
</div>
<!---->
<div><a href="#"><img src="images/AD_page_img_02.png" width="100%"/></a></div>
<!--位置-->
<div class="Bread_crumbs">
 <div class="Inside_pages clearfix">
     <div class="right Search" id="search">

     </div>
 </div>
</div>
<!--用户中心-->
<div class="Inside_pages clearfix" id="app">
  <div class="clearfix user" >
    <div class="user_left">
      <div class="user_info">
       <div class="Head_portrait"><img src="images/product_img_17.png"  width="80px" height="80px"/><!--头像区域--></div>
       <div class="user_name">{{user.name}}<a href="#">[个人资料]</a></div>
      </div>
        <div id="user"></div>
    </div>
    <div class="user_right">
     <div class="user_center_style">
     <div class="user_time">
      <h1></h1>
      <h4 id="D"></h4>
      <h4 id="y"></h4>
     </div>
      <ul class="user_center_info">
       <li>
        <img src="images/user_img_05.png" />
        <h4 class="Money">余额￥34</h4>
       </li>
       <li><img src="images/user_img_04.png" />
        <a href="#">代收货（3）</a>
       </li>
       <li><img src="images/user_img_06.png" />
        <a href="#">积分{{user.integral}}分</a>
       </li>
       <li><img src="images/user_img_03.png" />
        <a href="#">订单评价（5）</a>
       </li>
      </ul>     
     </div>
     <div class="Order_form">
       <div class="user_Borders">
        <div class="title_name">
        <span class="name">我的订单</span>
        <a href="#">更多订单&gt;&gt;</a>
       </div>
       <div class="Order_form_list">
         <table>
         <thead>
          <td class="list_name_title0">商品</td>
          <td class="list_name_title1">单价(元)</td>
          <td class="list_name_title2">数量</td>
          <td class="list_name_title4">实付款(元)</td>
          <td class="list_name_title5">订单状态</td>
          <td class="list_name_title6">收货地址</td>
         </thead> 
            <tbody v-for="(detail,index) of details">
           <tr>
               <td colspan="6" class="Order_form_time">{{detail.createDate}} 订单号：{{detail.orderNumber}}</td>
           </tr>
           <tr>
           <td colspan="3">
           <table class="Order_product_style">
           <tr v-for="order of detail.list">
           <td>
            <div class="product_name clearfix">
            <a href="#"><img v-bind:src="order.img"  width="80px" height="80px"/></a>
            <a href="3">{{order.name}}</a>
            <p class="specification">{{order.flag}}</p>
            </div>
            </td>
            <td>{{order.money/order.number}}</td>
            <td>{{order.number}}</td>
            </tr>
            </table>
           </td>
           <td class="split_line">{{detail.money}}</td>
           <td class="split_line">{{detail.status}}</td>
           <td>{{detail.address.userAddress}}</td>
           </tr>
           </tbody>

         </table>
       </div>
       </div>
     </div>
    </div>
  </div>
</div>
<script src="./lib/layui/layui.js" charset="utf-8"></script>
<script src="./js/x-admin.js"></script>
<script src="./js/x-layui.js" charset="utf-8"></script>
<script type="text/javascript" src="js/vue.js"></script>

<script>
    $(function(){
        $("#head").load("head.html");
        $("#user").load("user_main.html");
        $("#search").load("search.html")
    });
</script>
<script type="text/javascript">
    layui.use(['laydate','element','laypage','layer'], function(){
        $ = layui.jquery;//jquery
        laydate = layui.laydate;//日期插件
        lement = layui.element();//面包导航
        laypage = layui.laypage;//分页
        layer = layui.layer;//弹出层

    });

    var app=new Vue({
        el:"#app",
        data:{
            details:[],//定单
            user:[]//会员
        }
    })
    //加载页面自动执行
    $(document).ready(function () {
        var userId=getQueryString("userId")
        //去数据库查询信息
        $.ajax({
            url:"orders/getAll",
            type:"post",
            dataType:"json",
            data:{
                userXh:userId
            },
            success:function (data) {
                app.details=data.data.orders
                app.user=data.data.user
                console.log(data.data.orders)
            }
        })
    })
    //获取路径上的参数
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null)
            return decodeURI(r[2]);
        return null;
    }
</script>
</body>
</html>
